{"version":3,"file":null,"sources":["../src/line.js","../src/day.js","../src/widget.js"],"sourcesContent":["const {React} = Serverboards\n\nconst mimetypes_to_icon={\n  \"application/zip\": \"compress\",\n  \"application/vnd.google-apps.document\": \"file word outline\",\n  \"application/vnd.google-apps.presentation\" : \"file powerpoint outline\",\n  \"application/vnd.google-apps.folder\": \"folder\",\n  \"image\" : \"file image outline\"\n}\n\nfunction get_icon_for(props){\n  console.log(props.type)\n  const maintype = props.type.split(\"/\")[0]\n  return mimetypes_to_icon[props.type] || mimetypes_to_icon[maintype] || \"file green\"\n}\n\nfunction DriveLine(props){\n  return (\n    <div className=\"entry\">\n      <div className=\"icon\">\n        <a href={props.viewLink} target=\"_blank\">\n          <i className={`ui icon ${get_icon_for(props)} big`}/>\n        </a>\n      </div>\n      <div className=\"data\">\n        <b>{props.author}</b>&nbsp;\n        {props.what}&nbsp;\n        <b>{props.file}</b>&nbsp;\n        <b>{props.to}</b>\n      </div>\n      <div className=\"time\">\n        {props.downloadLink ? (\n          <a href={props.downloadLink} target=\"_blank\">\n            <i className=\"ui icon download\"/>\n          </a>\n        ) : null }\n      </div>\n      <div className=\"time\">\n        {props.time}\n      </div>\n    </div>\n  )\n}\n\nexport default DriveLine\n","const {React, utils, moment} = Serverboards\nimport Line from './line'\n\nfunction DriveDay(props){\n  return (\n    <div>\n      <div className=\"date\">{utils.pretty_ago(props.date, moment(), \"day\")}</div>\n      {props.entries.map( l => (\n        <Line {...l}/>\n      ))}\n    </div>\n  )\n}\n\nexport default DriveDay\n","const {rpc, React, plugin} = Serverboards\nconst plugin_id=\"serverboards.google.drive\"\nimport Day from './day'\n\nfunction View(props){\n  return (\n    <div className=\"google drive\">\n      {props.days.map( d => (\n        <Day {...d}/>\n      ))}\n    </div>\n  )\n}\n\nlet drive\n\nconst Model = React.createClass({\n  getInitialState(){\n    return {lines:[], loading: true}\n  },\n  update(){\n    drive.call(\"get_changes\", [this.props.config.service.uuid]).then( (changes) => {\n      console.log(changes)\n      this.setState({lines: changes})\n    })\n  },\n  componentDidMount(){\n    plugin.start(\"serverboards.google.drive/daemon\")\n      .then( function(_drive){\n        drive=_drive\n      } ).then( this.update )\n  },\n  render(){\n    return (\n      <View days={this.state.lines}/>\n    )\n  }\n})\n\nfunction main(el, config, extra){\n  extra.setTitle(\"Google Drive activity\")\n  Serverboards.ReactDOM.render(<Model config={config}/>, el)\n\n  return function(){\n    Serverboards.ReactDOM.unmountComponentAtNode(el)\n  }\n}\n\nServerboards.add_widget(`${plugin_id}/widget`, main)\n"],"names":["Serverboards","React","mimetypes_to_icon","props","console","log","type","split","maintype","viewLink","get_icon_for","author","what","file","to","downloadLink","time","utils","moment","pretty_ago","date","entries","map","Line","l","rpc","plugin","plugin_id","days","Day","d","Model","createClass","getInitialState","lines","loading","update","drive","call","config","service","uuid","then","changes","setState","componentDidMount","start","_drive","render","state","el","extra","setTitle","ReactDOM","unmountComponentAtNode","add_widget","main"],"mappings":"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"}